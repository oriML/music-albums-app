<div class="search-bar">
  <mat-form-field appearance="outline" class="search-field">
    <mat-icon matPrefix>search</mat-icon>
    <input matInput [formControl]="searchControl" placeholder="Search for an album" [matAutocomplete]="auto" />

    <mat-autocomplete #auto="matAutocomplete">
      @for (query of recentQueries(); track query) {
      <mat-option (click)="onRecentQuerySelected(query)">
        <div class="option-row">
          <span>{{ query }}</span>
          <button mat-icon-button type="button" (click)="$event.stopPropagation(); removeQuery(query)">
            <mat-icon>close</mat-icon>
          </button>
        </div>
      </mat-option>

      }
    </mat-autocomplete>
    @if (searchControl.hasError('noSymbols')) {
      <mat-error>Symbols are not allowed in search queries.</mat-error>
    }
    @if (searchControl.hasError('required')) {
      <mat-error>Search query is required.</mat-error>
    }
  </mat-form-field>
</div>